#!/usr/bin/env bash

dots_cmd() {
	local install_cmd="$(realpath "$(dirname "$(readlink -f "${BASH_SOURCE[0]}")")/..")/install"
	local f=".local/bin/dots"

	[[ -f $f ]] && rm $f
	
	touch $f
	cat >$f <<-EOF
		#!/usr/bin/env bash

		${install_cmd} --name=dots "\$@"
	EOF
	chmod +x $f
}

function check_installed() {
    local path="$1"
    if ! [[ -L "$path" ]]; then
        return -1;
    fi
    return 0
}

path=".local/bin/git-fuzzy"
echo -en " git-fuzzy"

if ! check_installed "$path"; then
    ln -s $(realpath "./git-fuzzy/bin/git-fuzzy") "$path"
fi

echo "$(small)  ...done$(reset)"
unset path



echo -en " dots-cmd"
dots_cmd
echo "$(small)  ...done$(reset)"